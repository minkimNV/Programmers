## 1. `GENOTYPE`은 **형질을 담은 숫자** (2진수로 표현됨)


**GENOTYPE이 숫자 하나인데, 그 안에 여러 개의 형질 정보가 담겨 있음.**
이걸 꺼내서 확인하려면 **비트 연산**이 필요하다.


우선 10진수 13을 2진수로 표현하면:
```plaintext
GENOTYPE = 13 → 2진수로 1101
```

```
13 = 1101₂
```

```
[1][1][0][1]
 ↑  ↑  ↑  ↑
 8  4  2  1   ← 각 자리는 2의 거듭제곱 (2³, 2², 2¹, 2⁰)
```

* 가장 오른쪽 비트(2⁰ = 1): 1 → **1번 형질 있음**
* 두 번째 비트(2¹ = 2): 0 → **2번 형질 없음**
* 세 번째 비트(2² = 4): 1 → **3번 형질 있음**
* 네 번째 비트(2³ = 8): 1 → **4번 형질 있음**

---

| 형질 번호 | 대응되는 값 (2의 거듭제곱) |
| ----- | ---------------- |
| 1번    | 1 (= 2⁰)         |
| 2번    | 2 (= 2¹)         |
| 3번    | 4 (= 2²)         |
| 4번    | 8 (= 2³)         |
| ...   | ...              |

그래서 `GENOTYPE = 13`이면:

* 13 = 8 + 4 + 1 → 형질 4번 + 3번 + 1번 보유

---

## ✅ 결과 정리

| 비트 위치 | 2의 제곱 | 형질 번호 | 13에서 값 | 형질 보유 여부 |
| ----- | ----- | ----- | ------ | -------- |
| 2⁰    | 1     | 1번    | ✔️ (1) | O        |
| 2¹    | 2     | 2번    | ❌ (0)  | X        |
| 2²    | 4     | 3번    | ✔️ (4) | O        |
| 2³    | 8     | 4번    | ✔️ (8) | O        |

그래서 결론:
👉 `13 = 1101₂` → 1번, 3번, 4번 형질 보유

---

## 2. `&` 비트 AND 연산의 뜻

> `A & B`는 A와 B를 **2진수로 변환한 다음, 각 비트를 AND(곱셈) 연산**한 결과를 반환.

### 예제: `13 & 4`

* `13` → `1101` (형질 1, 3, 4 있음)
* `4` → `0100` (형질 3만 나타냄)

```
  1101   (13)
& 0100   (4)
= 0100   → 결과: 4 (≠ 0 → 3번 형질 있음!)
```

반대로:

### 예제: `13 & 2`

* `13` → `1101`
* `2` → `0010`

```
  1101
& 0010
= 0000   → 결과: 0 → 2번 형질 없음!
```

---

### ✅ 형질 번호와 비트 매핑

| 형질 번호 | 2진수 비트 값 (2^n) | 의미                     |
|------------|----------------------|----------------------------|
| 1번        | 1 (= 2⁰)             | 최하위 비트 (맨 오른쪽)   |
| 2번        | 2 (= 2¹)             | 오른쪽에서 두 번째         |
| 3번        | 4 (= 2²)             | 오른쪽에서 세 번째         |
| 4번        | 8 (= 2³)             | 오른쪽에서 네 번째         |
| ...        | ...                  | ...                        |

---

### ✅ 대장균의 GENOTYPE 예시 분석

| ID | GENOTYPE (10진수) | 2진수 표현 | 보유한 형질 |
|----|-------------------|-------------|-----------------------------|
| 1  | 8                 | `1000`      | 4번                         |
| 2  | 15                | `1111`      | 1, 2, 3, 4번                |
| 3  | 1                 | `0001`      | 1번                         |
| 4  | 13                | `1101`      | 1, 3, 4번                   |

---

```sql
genotype & 1 != 0  -- 1번 형질이 있으면 True
genotype & 2 = 0   -- 2번 형질이 없으면 True
genotype & 4 != 0  -- 3번 형질이 있으면 True
```

### ✅ 예시: genotype = 13 (1101₂)

```plaintext
  1101   (13)
& 0001   (1)  → 0001 = 1   → 1번 형질 있음
& 0010   (2)  → 0000 = 0   → 2번 형질 없음
& 0100   (4)  → 0100 = 4   → 3번 형질 있음
```

→ 결과: **1번, 3번, 4번 형질 보유**

---


```sql
-- 2번 형질이 없고, 1번 또는 3번 형질이 있는 대장균
SELECT COUNT(*)
FROM ECOLI_DATA
WHERE genotype & 2 = 0
  AND (genotype & 1 != 0 OR genotype & 4 != 0);
```
